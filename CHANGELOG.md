# 更新日志

## v0.5.0 (2025-11-04)

首个稳定版本发布。

### 新功能

**GUI 界面**
- 基于 ttkbootstrap 的深色主题界面
- 登录时弹出二维码窗口，支持"我已扫描登录"确认按钮
- 实时彩色日志输出，显示处理进度
- 支持后台模式（无头浏览器）

**批量处理**
- 支持多文件选择和文件夹批量处理
- 失败任务自动记录
- 完成后显示统计信息（成功/失败数量）
- 列出所有失败文件的文件名

**登录优化**
- Cookie 持久化存储，自动恢复登录会话
- 登录状态智能检测
- 二维码 5 分钟倒计时提醒
- 自动处理百度账号中心跳转

### Bug 修复

- 修复统计数据中总数始终显示为 0 的问题
- 修复文件名重复添加 `_去手写` 后缀的问题
- 修复处理后的文件未保存到指定输出文件夹的问题
- 修复 Windows 系统下 asyncio 资源警告
- 修复 GUI 登录窗口在异步环境下的线程安全问题

### 性能优化

- 页面加载策略从 `networkidle` 改为 `domcontentloaded`，提升加载速度
- 增强反检测能力（Patchright 优先，Playwright 备用）
- 改进异步任务和 GUI 线程间的同步机制
- 优化资源清理流程

### 使用方式

```bash
# 安装依赖
pip install -r requirements.txt
patchright install chromium

# 启动程序
python gui.py
```

---

## 未来计划

- 支持拖拽文件到窗口
- 预览处理效果对比
- 自定义批量重命名规则
- 处理历史记录
- 支持更多图片格式

---

## 已知问题

1. 部分图片处理可能超时（受百度服务器响应时间影响）
2. Windows 系统下过长的文件路径可能导致保存失败（系统限制 260 字符）

遇到问题请查看终端日志输出，通常会包含详细的错误信息。

